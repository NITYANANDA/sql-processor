###########################################
# Create
###########################################

## Create normal entities
    
s1 = CREATE TABLE MEDIA ( \
  ID NUMBER(19) NOT NULL, \
  TITLE VARCHAR2(100) NOT NULL, \
  CREATEDDATE TIMESTAMP, \
  CREATEDBY VARCHAR2(50), \
  LASTUPDATED TIMESTAMP, \
  LASTUPDATEDBY VARCHAR2(50), \
  VERSION NUMBER(19) NOT NULL \
);


s2 = CREATE TABLE BOOK ( \
  ISBN VARCHAR2(20) NOT NULL, \
  MEDIA NUMBER(19) NOT NULL \
);


s3 = CREATE TABLE CONTACT ( \
  ID NUMBER(19) NOT NULL, \
  ADRESS VARCHAR2(100), \
  CITY VARCHAR2(100), \
  ZIP VARCHAR2(100), \
  STATE VARCHAR2(100), \
  UUID VARCHAR2(36) NOT NULL, \
  CREATEDDATE TIMESTAMP, \
  CREATEDBY VARCHAR2(50), \
  LASTUPDATED TIMESTAMP, \
  LASTUPDATEDBY VARCHAR2(50), \
  VERSION NUMBER(19) NOT NULL, \
  PERSONNAME_FIRST VARCHAR2(100), \
  PERSONNAME_LAST VARCHAR2(100), \
  PHONE_NUMBER VARCHAR2(100) \
);


s4 = CREATE TABLE PERSON ( \
  ID NUMBER(19) NOT NULL, \
  BIRTHDATE DATE NOT NULL, \
  CREATEDDATE TIMESTAMP, \
  CREATEDBY VARCHAR2(50), \
  LASTUPDATED TIMESTAMP, \
  LASTUPDATEDBY VARCHAR2(50), \
  VERSION NUMBER(19) NOT NULL, \
  CONTACT NUMBER(19), \
  SSN_NUMBER VARCHAR2(20) NOT NULL, \
  SSN_COUNTRY VARCHAR2(100) NOT NULL, \
  NAME_FIRST VARCHAR2(100) NOT NULL, \
  NAME_LAST VARCHAR2(100) NOT NULL, \
  SEX VARCHAR2(100) NOT NULL, \
  CLOTHES_SIZE NUMBER(10) \
);


s5 = CREATE TABLE ENGAGEMENT ( \
  ID NUMBER(19) NOT NULL, \
  ROLE VARCHAR2(100) NOT NULL, \
  UUID VARCHAR2(36) NOT NULL, \
  PERSON NUMBER(19) NOT NULL, \
  MEDIA NUMBER(19) NOT NULL \
);


s6 = CREATE TABLE LIBRARY ( \
  ID NUMBER(19) NOT NULL, \
  NAME VARCHAR2(100) NOT NULL, \
  CREATEDDATE TIMESTAMP, \
  CREATEDBY VARCHAR2(50), \
  LASTUPDATED TIMESTAMP, \
  LASTUPDATEDBY VARCHAR2(50), \
  VERSION NUMBER(19) NOT NULL \
);


s7 = CREATE TABLE MEDIACHARACTER ( \
  ID NUMBER(19) NOT NULL, \
  NAME VARCHAR2(100) NOT NULL, \
  UUID VARCHAR2(36) NOT NULL \
);


s8 = CREATE TABLE MOVIE ( \
  URLIMDB VARCHAR2(100) NOT NULL, \
  PLAYLENGTH NUMBER(10) NOT NULL, \
  CATEGORY VARCHAR2(40), \
  MEDIA NUMBER(19) NOT NULL \
);


s9 = CREATE TABLE PHYSICALMEDIA ( \
  ID NUMBER(19) NOT NULL, \
  STATUS VARCHAR2(3) NOT NULL, \
  LOCATION VARCHAR2(100) NOT NULL, \
  UUID VARCHAR2(36) NOT NULL, \
  CREATEDDATE TIMESTAMP, \
  CREATEDBY VARCHAR2(50), \
  LASTUPDATED TIMESTAMP, \
  LASTUPDATEDBY VARCHAR2(50), \
  VERSION NUMBER(19) NOT NULL, \
  LIBRARY NUMBER(19) \
);


## Create many to many relations
    
s10 = CREATE TABLE EXISTSINMEDIA_MEDIACHARACTER ( \
  MEDIACHARACTER NUMBER(19) NOT NULL, \
  EXISTSINMEDIA NUMBER(19) NOT NULL \
);


s11 = CREATE TABLE MEDIACHARACTER_PLAYEDBY ( \
  PLAYEDBY NUMBER(19) NOT NULL, \
  MEDIACHARACTER NUMBER(19) NOT NULL \
);


s12 = CREATE TABLE MEDIA_PHYSICALMEDIA ( \
  PHYSICALMEDIA NUMBER(19) NOT NULL, \
  MEDIA NUMBER(19) NOT NULL \
);


## Primary keys
    
s13 = ALTER TABLE MEDIA ADD CONSTRAINT PK_MEDIA \
	PRIMARY KEY (ID) \
;

s14 = ALTER TABLE CONTACT ADD CONSTRAINT PK_CONTACT \
	PRIMARY KEY (ID) \
;

s15 = ALTER TABLE PERSON ADD CONSTRAINT PK_PERSON \
	PRIMARY KEY (ID) \
;

s16 = ALTER TABLE ENGAGEMENT ADD CONSTRAINT PK_ENGAGEMENT \
	PRIMARY KEY (ID) \
;

s17 = ALTER TABLE LIBRARY ADD CONSTRAINT PK_LIBRARY \
	PRIMARY KEY (ID) \
;

s18 = ALTER TABLE MEDIACHARACTER ADD CONSTRAINT PK_MEDIACHARACTER \
	PRIMARY KEY (ID) \
;

s19 = ALTER TABLE PHYSICALMEDIA ADD CONSTRAINT PK_PHYSICALMEDIA \
	PRIMARY KEY (ID) \
;
    
s20 = ALTER TABLE EXISTSINMEDIA_MEDIACHARACTER ADD CONSTRAINT PK_EXISTSINMEDIA_MEDIACHARACTE \
	PRIMARY KEY (MEDIACHARACTER, EXISTSINMEDIA) \
;

s21 = ALTER TABLE MEDIACHARACTER_PLAYEDBY ADD CONSTRAINT PK_MEDIACHARACTER_PLAYEDBY \
	PRIMARY KEY (PLAYEDBY, MEDIACHARACTER) \
;

s22 = ALTER TABLE MEDIA_PHYSICALMEDIA ADD CONSTRAINT PK_MEDIA_PHYSICALMEDIA \
	PRIMARY KEY (PHYSICALMEDIA, MEDIA) \
;


## Unique constraints

s23 = ALTER TABLE BOOK \
	ADD CONSTRAINT UQ_BOOK UNIQUE (ISBN) \
;

s24 = ALTER TABLE CONTACT \
    ADD CONSTRAINT UQ_CONTACT UNIQUE (UUID) \
;

s25 = ALTER TABLE PERSON \
	ADD CONSTRAINT UQ_PERSON UNIQUE (SSN_NUMBER, SSN_COUNTRY) \
;

s26 = ALTER TABLE ENGAGEMENT \
    ADD CONSTRAINT UQ_ENGAGEMENT UNIQUE (UUID) \
;

s27 = ALTER TABLE LIBRARY \
	ADD CONSTRAINT UQ_LIBRARY UNIQUE (NAME) \
;

s28 = ALTER TABLE MEDIACHARACTER \
    ADD CONSTRAINT UQ_MEDIACHARACTER UNIQUE (UUID) \
;

s29 = ALTER TABLE MOVIE \
	ADD CONSTRAINT UQ_MOVIE UNIQUE (URLIMDB) \
;

s30 = ALTER TABLE PHYSICALMEDIA \
    ADD CONSTRAINT UQ_PHYSICALMEDIA UNIQUE (UUID) \
;


## Foreign key constraints
s31 = ALTER TABLE BOOK ADD CONSTRAINT FK_BOOK_MEDIA \
	FOREIGN KEY (MEDIA) REFERENCES MEDIA (ID) ON DELETE CASCADE \
;

s32 = ALTER TABLE MOVIE ADD CONSTRAINT FK_MOVIE_MEDIA \
	FOREIGN KEY (MEDIA) REFERENCES MEDIA (ID) ON DELETE CASCADE \
;
  
s33 = ALTER TABLE PERSON ADD CONSTRAINT FK_PERSON_CONTACT \
	FOREIGN KEY (CONTACT) REFERENCES CONTACT (ID) ON DELETE CASCADE \
;
  
s34 = ALTER TABLE ENGAGEMENT ADD CONSTRAINT FK_ENGAGEMENT_PERSON \
	FOREIGN KEY (PERSON) REFERENCES PERSON (ID) ON DELETE CASCADE \
;

s35 = ALTER TABLE ENGAGEMENT ADD CONSTRAINT FK_ENGAGEMENT_MEDIA \
	FOREIGN KEY (MEDIA) REFERENCES MEDIA (ID) ON DELETE CASCADE \
;

s36 = ALTER TABLE PHYSICALMEDIA ADD CONSTRAINT FK_PHYSICALMEDIA_LIBRARY \
	FOREIGN KEY (LIBRARY) REFERENCES LIBRARY (ID) ON DELETE CASCADE \
;

s37 = ALTER TABLE EXISTSINMEDIA_MEDIACHARACTER ADD CONSTRAINT FK_EXISTSINMEDIA_MEDIACHARAC53 \
	FOREIGN KEY (MEDIACHARACTER) REFERENCES MEDIACHARACTER (ID) \
;

s38 = ALTER TABLE EXISTSINMEDIA_MEDIACHARACTER ADD CONSTRAINT FK_EXISTSINMEDIA_MEDIACHARAC27 \
	FOREIGN KEY (EXISTSINMEDIA) REFERENCES MEDIA (ID) \
;
  
s39 = ALTER TABLE MEDIACHARACTER_PLAYEDBY ADD CONSTRAINT FK_MEDIACHARACTER_PLAYEDBY_P03 \
	FOREIGN KEY (PLAYEDBY) REFERENCES PERSON (ID) ON DELETE CASCADE \
;

s40 = ALTER TABLE MEDIACHARACTER_PLAYEDBY ADD CONSTRAINT FK_MEDIACHARACTER_PLAYEDBY_M76 \
	FOREIGN KEY (MEDIACHARACTER) REFERENCES MEDIACHARACTER (ID) \
;
  
s41 = ALTER TABLE MEDIA_PHYSICALMEDIA ADD CONSTRAINT FK_MEDIA_PHYSICALMEDIA_PHYSI64 \
	FOREIGN KEY (PHYSICALMEDIA) REFERENCES PHYSICALMEDIA (ID) \
;

s42 = ALTER TABLE MEDIA_PHYSICALMEDIA ADD CONSTRAINT FK_MEDIA_PHYSICALMEDIA_MEDIA \
	FOREIGN KEY (MEDIA) REFERENCES MEDIA (ID) \
;

s43 = CREATE SEQUENCE SQLPROC_SEQUENCE INCREMENT BY 1 START WITH 100;

## types

s44 = CREATE TABLE TYPES  \
( \
  ID NUMBER(19, 0) NOT NULL  \
, T_INT NUMBER(10, 0)  \
, T_LONG NUMBER(19, 0)  \
, T_BYTE NUMBER(3, 0)  \
, T_SHORT NUMBER(5, 0)  \
, T_FLOAT FLOAT(126)  \
, T_DOUBLE FLOAT(126)  \
, T_CHAR CHAR(1 CHAR)  \
, T_STRING VARCHAR2(255 CHAR)  \
, T_DATE DATE  \
, T_TIME DATE  \
, T_DATETIME DATE  \
, T_TIMESTAMP TIMESTAMP(9)  \
, T_BOOLEAN NUMBER(1, 0)  \
, T_BIG_INTEGER NUMBER(19, 2)  \
, T_BIG_DECIMAL NUMBER(19, 2)  \
, A_BYTE RAW(255)  \
, A_TEXT LONG  \
, A_CLOB CLOB  \
, A_BLOB BLOB  \
, CONSTRAINT PK_TYPES PRIMARY KEY  \
  ( \
    ID  \
  ) \
  ENABLE  \
);

